version: '1.0'

steps:
  build-prj:
    type: build
    description: e2e use case
    image-name: codefreshio/yaml-node-6
    dockerfile: Dockerfile
    tag: latest

  push-dockerhub:
    type: push
    candidate: ${{build-prj}}
    tag: latest

  deploy-aws:
    type: deploy
    image: codefreshio/yaml-node-6
    candidate: ${{push-dockerhub}}
    environment:
      - AWS_ID=${{AWS_ID}}
      - AWS_SECRET=${{AWS_SECRET}}